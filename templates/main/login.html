{% extends 'base.html' %}
{% block title %}–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É ‚Äî –ê–≤—Ç–æ–î–µ—Ç–∞–ª—å{% endblock %}
{% block main_class %} class="bg-light"{% endblock %}
{% block content %}
<div class="login-wrapper">
  <div class="login-card">
    <svg class="icon-top" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
      <polyline points="10 17 15 12 10 7"/>
      <line x1="15" y1="12" x2="3" y2="12"/>
    </svg>
    <h1>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h1>
    <p class="subtitle">–í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç</p>

    <form method="post" action="{% url 'login' %}">
      {% csrf_token %}
      {% if form.non_field_errors %}
      <ul class="form-errors">
        {% for error in form.non_field_errors %}<li>{{ error }}</li>{% endfor %}
      </ul>
      {% endif %}
      <div class="form-group">
        <label for="id_username">Email –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω</label>
        <input type="text" name="username" id="id_username" value="{{ form.username.value|default:'' }}" placeholder="email@example.com" autocomplete="username" required maxlength="150">
      </div>
      <div class="form-group">
        <label for="id_password">–ü–∞—Ä–æ–ª—å</label>
        <div class="password-wrap">
          <input type="password" name="password" id="id_password" autocomplete="current-password" required>
          <button type="button" class="toggle-password" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å" data-target="id_password">üëÅ</button>
        </div>
      </div>
      <div class="checkbox-group">
        <input type="checkbox" name="remember_me" id="id_remember_me" value="1">
        <label for="id_remember_me">–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è</label>
      </div>
      <input type="hidden" name="next" value="{{ next }}">
      <button type="submit" class="btn btn-primary">–í–æ–π—Ç–∏</button>
    </form>

    <div class="login-links">
      <a href="{% url 'register' %}">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
      <a href="{% url 'password_reset' %}">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
    </div>

    <div class="demo-credentials">
      <p><strong>–õ–æ–≥–∏–Ω (email):</strong> admin@autodetail.ru</p>
      <p><strong>–ü–∞—Ä–æ–ª—å:</strong> admin</p>
    </div>
  </div>
</div>
{% block extra_js %}
<script>
document.querySelectorAll('.toggle-password').forEach(function(btn) {
  btn.addEventListener('click', function() {
    var id = this.getAttribute('data-target');
    var input = document.getElementById(id);
    if (input.type === 'password') { input.type = 'text'; this.textContent = 'üôà'; } else { input.type = 'password'; this.textContent = 'üëÅ'; }
  });
});
</script>
{% endblock %}
{% endblock %}
