{% extends 'base.html' %}
{% block title %}–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Äî –ê–≤—Ç–æ–î–µ—Ç–∞–ª—å{% endblock %}
{% block main_class %} class="bg-light"{% endblock %}
{% block content %}
<div class="login-wrapper">
  <div class="login-card">
    <h1>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h1>
    <p class="subtitle">–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç</p>

    <form method="post">
      {% csrf_token %}
      {% if form.non_field_errors %}
      <ul class="form-errors">
        {% for error in form.non_field_errors %}<li>{{ error }}</li>{% endfor %}
      </ul>
      {% endif %}
      <div class="form-group">
        <label for="id_full_name">–§–ò–û</label>
        <input type="text" name="full_name" id="id_full_name" value="{{ form.full_name.value|default:'' }}" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á" maxlength="200" required>
        {% if form.full_name.errors %}<ul class="field-errors">{% for e in form.full_name.errors %}<li>{{ e }}</li>{% endfor %}</ul>{% endif %}
      </div>
      <div class="form-group">
        <label for="id_email">Email</label>
        <input type="email" name="email" id="id_email" value="{{ form.email.value|default:'' }}" placeholder="email@example.com" required>
        {% if form.email.errors %}<ul class="field-errors">{% for e in form.email.errors %}<li>{{ e }}</li>{% endfor %}</ul>{% endif %}
      </div>
      <div class="form-group">
        <label for="id_phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
        <div class="password-wrap">
          <input type="text" name="phone" id="id_phone" value="{{ form.phone.value|default:'' }}" placeholder="+7 (999) 123-45-67" maxlength="20">
        </div>
        {% if form.phone.errors %}<ul class="field-errors">{% for e in form.phone.errors %}<li>{{ e }}</li>{% endfor %}</ul>{% endif %}
      </div>
      <div class="form-group">
        <label for="id_password1">–ü–∞—Ä–æ–ª—å</label>
        <div class="password-wrap">
          <input type="password" name="password1" id="id_password1" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
          <button type="button" class="toggle-password" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å" data-target="id_password1">üëÅ</button>
        </div>
        {% if form.password1.errors %}<ul class="field-errors">{% for e in form.password1.errors %}<li>{{ e }}</li>{% endfor %}</ul>{% endif %}
      </div>
      <div class="form-group">
        <label for="id_password2">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</label>
        <div class="password-wrap">
          <input type="password" name="password2" id="id_password2" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
          <button type="button" class="toggle-password" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å" data-target="id_password2">üëÅ</button>
        </div>
        {% if form.password2.errors %}<ul class="field-errors">{% for e in form.password2.errors %}<li>{{ e }}</li>{% endfor %}</ul>{% endif %}
      </div>
      <div class="checkbox-group">
        <input type="checkbox" name="agree_terms" id="id_agree_terms" required {% if form.agree_terms.value %}checked{% endif %}>
        <label for="id_agree_terms">–Ø —Å–æ–≥–ª–∞—Å–µ–Ω —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ–º –∏ –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</label>
      </div>
      {% if form.agree_terms.errors %}<ul class="field-errors">{% for e in form.agree_terms.errors %}<li>{{ e }}</li>{% endfor %}</ul>{% endif %}
      <button type="submit" class="btn btn-primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
    </form>

    <div class="login-links">
      <a href="{% url 'login' %}">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏</a>
    </div>
  </div>
</div>
{% endblock %}
{% block extra_js %}
<script>
document.querySelectorAll('.toggle-password').forEach(function(btn) {
  btn.addEventListener('click', function() {
    var id = this.getAttribute('data-target');
    var input = document.getElementById(id);
    if (input.type === 'password') { input.type = 'text'; this.textContent = 'üôà'; } else { input.type = 'password'; this.textContent = 'üëÅ'; }
  });
});
</script>
{% endblock %}
